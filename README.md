## Yatube API: Руководство

**Yatube API** — это программный интерфейс для взаимодействия с социальной сетью, ориентированной на публикацию текстовых заметок (постов) и изображений.  Он даёт возможность управлять постами, комментариями, группами (сообществами) и подписками на других пользователей.  Для безопасного доступа используется аутентификация с помощью JWT-токенов (JSON Web Token).

**Что можно делать с помощью API:**

*   Создавать, изменять и удалять публикации.
*   Оставлять комментарии к публикациям.
*   Создавать группы и управлять ими.
*   Подписываться на других пользователей и отписываться от них.
*   Искать информацию и просматривать большие списки данных постранично.
*   Безопасно входить в систему, используя JWT-токены.

**Как начать использовать:**

1.  **Скачайте код:**  Скопируйте репозиторий с GitHub:

    ```bash
    git clone https://github.com/SonderLor/yatube-api.git
    cd yatube-api
    ```

2.  **Подготовьте рабочее окружение:**  Создайте и активируйте виртуальное окружение Python:

    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Linux или macOS
    venv\Scripts\activate  # Для Windows
    ```

3.  **Установите необходимые программы:**

    ```bash
    pip install -r requirements.txt
    ```

4.  **Настройте базу данных:**

    ```bash
    python manage.py migrate
    ```

5.  **Запустите сервер разработки:**

    ```bash
    python manage.py runserver
    ```

**Примеры использования (команды `curl`):**

*   **Вход в систему (получение токена):**

    ```bash
    curl -X POST http://localhost:8000/api/v1/jwt/create/ \
    -H "Content-Type: application/json" \
    -d '{"username": "ваше_имя_пользователя", "password": "ваш_пароль"}'
    ```

    В ответ вы получите JSON с двумя токенами: `refresh` (для обновления) и `access` (для доступа).

*   **Просмотр списка публикаций (с постраничным выводом):**

    ```bash
    curl -X GET "http://localhost:8000/api/v1/posts/?limit=10&offset=0"
    ```
    `limit` - сколько записей показать, `offset` - сколько записей пропустить (для перехода на следующую страницу).

*   **Создание новой публикации (нужен токен доступа!):**

    ```bash
    curl -X POST http://localhost:8000/api/v1/posts/ \
    -H "Authorization: Bearer ваш_access_token" \
    -H "Content-Type: application/json" \
    -d '{"text": "Текст вашей публикации", "group": 1}'  # group - ID группы (необязательно)
    ```
    Вместо  `ваш_access_token`  подставьте полученный ранее токен доступа.

*   **Добавление комментария к публикации (нужен токен!):**

    ```bash
    curl -X POST http://localhost:8000/api/v1/posts/1/comments/ \
    -H "Authorization: Bearer ваш_access_token" \
    -H "Content-Type: application/json" \
    -d '{"text": "Ваш комментарий"}'
    ```
    `1`  в URL — это ID публикации, к которой добавляется комментарий.

*   **Подписка на пользователя (нужен токен!):**

    ```bash
    curl -X POST http://localhost:8000/api/v1/follow/ \
    -H "Authorization: Bearer ваш_access_token" \
    -H "Content-Type: application/json" \
    -d '{"following": "имя_пользователя_цели"}'
    ```

*  **Добавление публикации с изображением (нужен токен!):**
    ```bash
    curl -X POST http://localhost:8000/api/v1/posts/ \
    -H "Authorization: Bearer ваш_access_token" \
    -F "text=Пост с картинкой" \
    -F "image=@/путь/к/вашему/изображению.jpg"
    ```

*   **Просмотр информации о группе:**

    ```bash
    curl -X GET http://localhost:8000/api/v1/groups/1/
    ```
    `1`  в URL — это ID группы.

**Где найти полную документацию:**

*   **ReDoc:** `/redoc/` (в вашем браузере по адресу  `http://localhost:8000/redoc/`)
*   **Swagger:** `/swagger/` (интерактивная документация  `http://localhost:8000/swagger/`)

**Важные моменты:**

*   Для создания и изменения данных (публикаций, комментариев и т.д.) требуется аутентификация (нужно отправить токен доступа в заголовке `Authorization`).
*   Для просмотра больших списков используется пагинация (постраничный вывод) с помощью параметров  `limit`  и  `offset`  в URL запроса.
*   Можно искать по подпискам, используя параметр `search`
*   Все данные, которые вы отправляете, проверяются на сервере.
*   В случае ошибок вы получите подробные сообщения об ошибках.

